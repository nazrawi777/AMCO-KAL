<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Discover AMCO Interior Design for top-quality furniture and exceptional interior design services in Addis Ababa, Ethiopia. Visit our store for the best furniture prices and designs. Find furniture in Ethiopia, a furniture store in Addis Ababa, and interior design services.">
  <title>AMCO Interior Design | Furniture in Ethiopia, Addis Ababa</title>
  <meta name="keywords" content="AMCO Interior Design, Furniture in Ethiopia, Furniture Store in Addis Ababa, Furniture in Addis Ababa with Price, Furniture in Addis, Furniture House in Addis Ababa, Furniture Shops in Addis Ababa, Furniture Design Ethiopia, Interior Design Addis Ababa">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet" />
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background-color: #f2fafa;
    }

    nav ul li {
      position: relative;
      bottom: 140px;
      left: 400px;
    }

    .logo {
      position: relative;
      top: -65px !important;
    }
  </style>
</head>

<body class="login-page">
  <!-- Header -->
  <header class="header" id="header">
    <nav>
      <div class="logo-container">
        <a href="/"><img src="/static/images/logo.png" alt="Your Logo" class="logo" /></a>
      </div>
      <ul id="menuList">
        <li><a id="home" href="/">Home</a></li>
        <li class="dropdown">
          <a class="dropbtn" href="#" onclick="toggleDropdown()" onmouseover="showDropdown()">About
            <span class="fas fa-angle-down"></span>
          </a>
          <div class="dropdown-content" id="dropdownMenu">
            <a id="about" href="/about">WHO WE ARE</a>
            <a href="/">Portfolio</a>
          </div>
        </li>
        <li><a href="/">Service</a></li>
        <li><a id="products" href="/prod">Products</a></li>
        <li><a href="/">Contact</a></li>
        <li><a id="vacancy" href="/">Vacancy</a></li>
        <li>
          <a id="login" href="sagin"><i class="fas fa-user"></i></a>
        </li>
      </ul>
      <div class="menu-icon">
        <i class="fa-solid fa-bars" onclick="toggleMenu()"></i>
      </div>
    </nav>
  </header>
  <div class="container mt-5">
    <h1 class="mb-4">Activity Log</h1>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Entity Type</th>
          <th>Entity ID</th>
          <th>Action</th>
          <th>Timestamp</th>
          <th>Details</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for action in actions %}
        <tr>
          <td>{{ action.id }}</td>
          <td>{{ action.entity_type }}</td>
          <td>{{ action.entity_id }}</td>
          <td>{{ action.action }}</td>
          <td>{{ action.timestamp }}</td>
          <td>{{ action.details }}</td>
          <td>
            <form method="post" action="{{ url_for('action_history.delete_action', action_id=action.id) }}"
              class="d-inline">
              <button type="submit" class="btn btn-danger btn-sm">
                Delete
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <div class="text-right">
      <a href="/sagout" class="btn btn-primary">Logout</a>
    </div>
  </div>

  <div class="relative overflow-x-auto p-5">
    <table class="table table-bordered table-hover">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
        <tr>
          <th scope="col">id</th>
          <th scope="col">name</th>
          <th scope="col">rol</th>
          <th scope="col">action</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
          <th scope="row">
            {{ user.id }}
          </th>
          <td>{{ user.username }}</td>
          <td>{{ user.role }}</td>
          <td class="d-flex align-items-center justify-content-around">
            <button type="button" class="btn btn-danger deleteBtn" data-ids="{{ user.id }}">delete</button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <div class="d-flex align-items-center">
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        Add
        User
      </button>

      <!-- Modal -->
      <div class="modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- Example: app/templates/user_form.html -->
              <form id="userForm">
                <div class="form-group">
                  <label for="username">Username</label>
                  <input type="text" class="form-control" id="username" name="username" placeholder="Enter username">
                </div>
                <div class="form-group">
                  <label for="Role">role</label>
                  <select class="custom-select" name="role" id="role">
                    <option value="user">user</option>
                    <option value="admin">Admin</option>
                  </select>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
              </form>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <img src="..." class="rounded mr-2" alt="...">
      <strong class="mr-auto">Amco</strong>
      <small class="text-muted"></small>
      <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="toast-body">
    </div>
  </div>

  <script>
    let menuList = document.getElementById("menuList");
    menuList.style.maxHeight = "0px";
    function toggleMenu() {
      if (menuList.style.maxHeight == "0px") {
        menuList.style.maxHeight = "300px";
      } else {
        menuList.style.maxHeight = "0px";
      }
    }
  </script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    $('#myModal').on('shown.bs.modal', function () {
      $('#myInput').trigger('focus')
    })


    $(document).ready(function () {

      $('#userForm').submit(function (event) {
        // Prevent the default form submission
        event.preventDefault();
        alert('User created successfully');

        // Serialize form data into JSON format
        var formData = {
          username: $('#username').val(),
          role: $('#role').val()
        };

        // AJAX POST request
        $.ajax({
          type: 'POST',
          url: '/user',  // Replace with your Flask route
          contentType: 'application/json',
          data: JSON.stringify(formData),
          success: function (response) {
            alert(response.message);
          },
          error: function (error) {
            alert(error);
          }
        });
      });


      $('#updateBtn').on('submit', function (event) {
        $.ajax({
          url: '/user/' + userId,
          type: 'PUT',
          contentType: 'application/json',
          data: JSON.stringify(newData),
          success: function (response) {
            console.log('User updated successfully:', response);
            // Handle success response
          },
          error: function (error) {
            console.error('Error updating user:', error);
            // Handle error response
          }
        });


        $('#updateModal').modal('hide');

      })

      $(".deleteBtn").on("click",function () {

        const userId = $(this).data('ids');

        console.log(userId)

        $.ajax({
          url: '/user/' + userId,
          type: 'DELETE',
          success: function (response) {
            alert('User deleted successfully:', response.message);

          },
          error: function (error) {
            alert('Error deleting user:', error.responseJSON.error
            );
          }
        });
        

      });


      
    });



    document.addEventListener("DOMContentLoaded", function () {
      const images = document.querySelectorAll(".gallery-image");
      const videoModal = document.getElementById("video-modal");
      const videoContainer = document.getElementById("video-container");
      const closeBtn = document.getElementById("close-btn");

      images.forEach((image) => {
        image.addEventListener("click", function () {
          const videoId = this.getAttribute("data-video-id");
          const iframe = document.createElement("iframe");
          iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
          iframe.allowFullscreen = true;

          // Get position and size of clicked image
          const rect = image.getBoundingClientRect();
          const imageWidth = rect.width;
          const imageHeight = rect.height;
          const imageTop = rect.top + window.scrollY;
          const imageLeft = rect.left + window.scrollX;

          // Set video modal position
          videoModal.style.top = imageTop + "px";
          videoModal.style.left = imageLeft + "px";

          // Set video container size
          videoContainer.style.width = imageWidth + "px";
          videoContainer.style.height = imageHeight + "px";

          videoContainer.appendChild(iframe);
          videoModal.style.display = "block";
        });
      });

      closeBtn.addEventListener("click", function () {
        videoContainer.innerHTML = ""; // Clear the iframe content
        videoModal.style.display = "none";
      });

      // Close the modal when clicking outside the video container
      window.addEventListener("click", function (event) {
        if (event.target === videoModal) {
          videoContainer.innerHTML = ""; // Clear the iframe content
          videoModal.style.display = "none";
        }
      });
    });
  </script>
  <script>
    document.querySelectorAll("iframe").forEach((iframe) => {
      // Adding a message event listener to detect video play and pause events
      window.addEventListener("message", function (event) {
        const data = JSON.parse(event.data);
        if (data.event === "infoDelivery" && data.info) {
          if (data.info.playerState === 1) {
            // Video is playing
            document.querySelector(".slides").style.animationPlayState =
              "paused";
          } else if (data.info.playerState === 2) {
            // Video is paused
            document.querySelector(".slides").style.animationPlayState =
              "running";
          }
        }
      });

      // Function to send a postMessage to the YouTube iframe
      function sendMessage(action, value) {
        iframe.contentWindow.postMessage(
          JSON.stringify({
            event: "command",
            func: action,
            args: [value],
          }),
          "*"
        );
      }

      // Attach event listener to check when iframe is interacted with
      iframe.addEventListener("load", () => {
        sendMessage("addEventListener", "onStateChange");
      });
    });
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const menuIcon = document.querySelector(".menu-icon");
      const navLinks = document.querySelector(".nav-links");

      menuIcon.addEventListener("click", function () {
        navLinks.classList.toggle("active");
      });
    });

    let slideIndex = 0;
    showSlide(slideIndex);

    function showSlide(n) {
      const slides = document.querySelectorAll(".carousel img");
      const dots = document.querySelectorAll(".dot");

      // Hide all slides and remove active class from dots
      slides.forEach((slide) => (slide.style.display = "none"));
      dots.forEach((dot) => dot.classList.remove("active"));

      // Adjust slide index to ensure it stays within bounds
      slideIndex = (n + slides.length) % slides.length;

      // Show current slide and set corresponding dot as active
      slides[slideIndex].style.display = "block";
      dots[slideIndex].classList.add("active");
    }

    // Event listener for previous button
    document.getElementById("prev").addEventListener("click", function () {
      showSlide(slideIndex - 1);
    });

    // Event listener for next button
    document.getElementById("next").addEventListener("click", function () {
      showSlide(slideIndex + 1);
    });

    // Automatic slide change every 3 seconds
    setInterval(function () {
      showSlide(slideIndex + 1);
    }, 3000);

    // Function to start counting animation
    function startCountingAnimation(targetElement) {
      const startNumber = 1; // Start counting from 1
      const endNumber = 100;
      const duration = 4000; // Animation duration in milliseconds
      const steps = endNumber - startNumber; // Total steps from start to end
      const interval = duration / steps; // Interval for each step

      let currentNumber = startNumber;
      const increment = 1; // Increment by 1 for each step

      const intervalId = setInterval(() => {
        if (currentNumber <= endNumber) {
          // Update the displayed number
          targetElement.textContent = currentNumber;
          currentNumber += increment;
        } else {
          // Display "100+" when the count reaches 100
          targetElement.textContent = "100+";
          // Stop the interval when reaching the end number
          clearInterval(intervalId);
        }
      }, interval);
    }

    // Function to observe element intersection
    function CountingAnimation(countingRef, startCountingAnimation) {
      const options = {
        root: null,
        rootMargin: "0px",
        threshold: 0.5, // Trigger when 50% of the target element is visible
      };

      const callback = (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            startCountingAnimation(entry.target);
            observer.unobserve(entry.target);
          }
        });
      };

      const observer = new IntersectionObserver(callback, options);
      if (countingRef) {
        observer.observe(countingRef);
      }

      return () => {
        if (countingRef) {
          observer.unobserve(countingRef);
        }
      };
    }

    // Get references to the counting containers
    const countingRefCr3 = document.getElementById("countingCr3");
    const countingRefCr6 = document.getElementById("countingCr6");

    // Start counting animation for cr3
    CountingAnimation(countingRefCr3, startCountingAnimation);
    // Start counting animation for cr6
    CountingAnimation(countingRefCr6, startCountingAnimation);

    // When the page is scrolled, check if the scroll position is greater than 100 pixels
    // Smooth scroll to the top when the arrow is clicked
    $(".arrow a").click(function () {
      $("html, body").animate(
        {
          scrollTop: 0,
        },
        500
      ); // Adjust the duration (in milliseconds) here for faster scrolling
      return false;
    });
    /* */

    /*socialmedia */
    document.addEventListener("DOMContentLoaded", function () {
      const socialIcons = document.querySelectorAll(".social-icon");

      socialIcons.forEach((icon) => {
        icon.addEventListener("click", function (event) {
          event.preventDefault();
          const socialName = icon.getAttribute("data-social");
          const socialUrl = getSocialUrl(socialName);
          window.open(socialUrl, "_blank");
        });
      });

      function getSocialUrl(socialName) {
        // Define your social media URLs
        const socialUrls = {
          Telegram: "https://telegram.org/",
          Instagram: "https://www.instagram.com/",
          Facebook: "https://www.facebook.com/profile.php?id=61559804274395",
          Twitter: "https://twitter.com/",
          LinkedIn: "https://www.linkedin.com/",
          YouTube: "https://www.youtube.com/",
          TikTok:
            "https://www.tiktok.com/@amco_interiorfurniture?_t=8mXEfzKb4HV&_r=1",
        };
        return socialUrls[socialName];
      }
    });

    function sendEmail() {
      // Get form data
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const phone = document.getElementById("phone").value;
      const message = document.getElementById("message").value;

      // Send email using EmailJS
      emailjs
        .send("service_l4r6gkd", "template_ab6zjtk", {
          from_name: name,
          from_email: email,
          phone: phone,
          message: message,
        })
        .then(
          function (response) {
            console.log("Email sent successfully", response);
            alert("Your message has been sent successfully!");
            // Optionally, clear the form fields
            document.getElementById("name").value = "";
            document.getElementById("email").value = "";
            document.getElementById("phone").value = "";
            document.getElementById("message").value = "";
          },
          function (error) {
            console.error("Error sending email", error);
            alert(
              "An error occurred while sending your message. Please try again later."
            );
          }
        );
    }
    /* slider*/
    document.addEventListener("DOMContentLoaded", function () {
      const slides = document.querySelectorAll(".slider img");
      const navButtons = document.querySelectorAll(".slider-nav a");
      let currentSlide = 0;
      let intervalId;

      function showSlide(index) {
        slides.forEach((slide, i) => {
          if (i === index) {
            slide.style.display = "block";
          } else {
            slide.style.display = "none";
          }
        });
      }

      function nextSlide() {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
      }

      function prevSlide() {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(currentSlide);
      }

      function startAutoPlay() {
        intervalId = setInterval(nextSlide, 3000);
      }

      function stopAutoPlay() {
        clearInterval(intervalId);
      }

      // Add event listeners to navigation buttons
      navButtons.forEach((button, index) => {
        button.addEventListener("click", function (event) {
          event.preventDefault();
          stopAutoPlay();
          currentSlide = index;
          showSlide(currentSlide);
          startAutoPlay();
        });
      });

      // Start auto-play
      startAutoPlay();
    });

    /* hoMEjs*/
    const myslide = document.querySelectorAll(".myslide"),
      dot = document.querySelectorAll(".dot");
    let counter = 1;
    slidefun(counter);

    let timer = setInterval(autoSlide, 8000);
    function autoSlide() {
      counter += 1;
      slidefun(counter);
    }
    function plusSlides(n) {
      counter += n;
      slidefun(counter);
      resetTimer();
    }
    function currentSlide(n) {
      counter = n;
      slidefun(counter);
      resetTimer();
    }
    function resetTimer() {
      clearInterval(timer);
      timer = setInterval(autoSlide, 8000);
    }

    function slidefun(n) {
      let i;
      for (i = 0; i < myslide.length; i++) {
        myslide[i].style.display = "none";
      }
      for (i = 0; i < dot.length; i++) {
        dot[i].className = dot[i].className.replace(" active", "");
      }
      if (n > myslide.length) {
        counter = 1;
      }
      if (n < 1) {
        counter = myslide.length;
      }
      myslide[counter - 1].style.display = "block";
      dot[counter - 1].className += " active";
    }
    /*email */

    emailjs.init("D3VuuvmzMea1ZpQ3l");

    // Event listener for form submission
    document
      .getElementById("submit-btn")
      .addEventListener("click", function () {
        sendEmail();
      });

    function sendEmail() {
      // Get form data
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const phone = document.getElementById("phone").value;
      const message = document.getElementById("message").value;

      // Send email using EmailJS
      emailjs
        .send("service_l4r6gkd", "template_ab6zjtk", {
          from_name: name,
          from_email: email,
          phone: phone,
          message: message,
        })
        .then(
          function (response) {
            console.log("Email sent successfully", response);
            // Show success message
            showAlert("Your message has been sent successfully!");
            // Optionally, clear the form fields
            clearFormFields();
          },
          function (error) {
            console.error("Error sending email", error);
            // Show error message
            showAlert(
              "An error occurred while sending your message. Please try again later.",
              true
            );
          }
        );
    }

    function showAlert(message, isError = false) {
      alert(message); // Simple alert popup
      // You can customize this to use a styled modal dialog for a better user experience
    }

    function clearFormFields() {
      // Clear form fields
      document.getElementById("name").value = "";
      document.getElementById("email").value = "";
      document.getElementById("phone").value = "";
      document.getElementById("message").value = "";
    }

    document.addEventListener("DOMContentLoaded", function () {
      const lines = document.querySelectorAll(".for-decades-amco .line");

      // Function to trigger auto-write animation for each line
      function autoWriteLine(line) {
        // Start animation
        line.style.animation = "autoWrite 1s steps(40) forwards";
        // Add event listener for animation end
        line.addEventListener("animationend", function () {
          // Ensure line remains visible after animation
          line.style.opacity = "1";
          // Hide the border line
          line.classList.add("hide-border");
          // Show the next line if available
          const nextLineIndex = Array.from(lines).indexOf(this) + 1;
          if (nextLineIndex < lines.length) {
            autoWriteLine(lines[nextLineIndex]);
          }
        });
      }

      // Trigger the animation sequence for the first line
      autoWriteLine(lines[0]);
    });

    document.addEventListener("DOMContentLoaded", (event) => {
      let items = document.querySelectorAll(
        ".carousel-container .carousel-list .carousel-item"
      );
      let container = document.querySelector(".carousel-container");
      let dots = document.querySelectorAll(".carousel-dots li");
      let nextBtn = document.querySelector(".carousel-arrows .next");
      let prevBtn = document.querySelector(".carousel-arrows .prev");

      let lastIndex = items.length - 1;
      let activeIndex = 0;
      let zIndex = 2;

      nextBtn.onclick = () => {
        let newIndex = activeIndex + 1 > lastIndex ? 0 : activeIndex + 1;
        setActiveItem(newIndex);
      };

      prevBtn.onclick = () => {
        let newIndex = activeIndex - 1 < 0 ? lastIndex : activeIndex - 1;
        setActiveItem(newIndex);
      };

      dots.forEach((dot, index) => {
        dot.addEventListener("click", () => {
          setActiveItem(index);
        });
      });

      const setActiveItem = (newIndex) => {
        if (newIndex === activeIndex) return;
        activeIndex = newIndex;
        showSlider();
      };

      const showSlider = () => {
        container.style.pointerEvents = "none";
        let activeItem = document.querySelector(
          ".carousel-container .carousel-list .carousel-item.active"
        );
        if (activeItem) activeItem.classList.remove("active");
        zIndex++;
        items[activeIndex].style.zIndex = zIndex;
        items[activeIndex].classList.add("active");

        container.classList.add("effect");

        let activeDot = document.querySelector(".carousel-dots li.active");
        if (activeDot) activeDot.classList.remove("active");
        dots[activeIndex].classList.add("active");

        clearTimeout(removeEffect);
        removeEffect = setTimeout(() => {
          container.classList.remove("effect");
          container.style.pointerEvents = "auto";
        }, 1500);

        clearTimeout(autoRun);
        autoRun = setTimeout(() => {
          nextBtn.click();
        }, 5000);
      };

      let removeEffect;
      let autoRun = setTimeout(() => {
        nextBtn.click();
      }, 5000);
    });
  </script>
</body>

<script>
  function toggleDropdown() {
    var dropdown = document.getElementById("dropdownMenu");
    if (dropdown.style.display === "block") {
      dropdown.style.display = "none";
    } else {
      dropdown.style.display = "block";
    }
  }

  function showDropdown() {
    var dropdown = document.getElementById("dropdownMenu");
    dropdown.style.display = "block";
  }

  // Hide dropdown when clicking outside
  window.onclick = function (event) {
    if (!event.target.matches(".dropbtn")) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      for (var i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.style.display === "block") {
          openDropdown.style.display = "none";
        }
      }
    }
  };
</script>

</html>